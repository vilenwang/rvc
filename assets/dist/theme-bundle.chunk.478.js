/*! For license information please see theme-bundle.chunk.478.js.LICENSE.txt */
(self.webpackChunkflair_camden=self.webpackChunkflair_camden||[]).push([[478],{478:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u}),i(9357),i(2310),i(8838);var r=i(9230),n=i(2066),s=i(7460),a=i(5825);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var u=function(t){var e,i;function r(){return t.apply(this,arguments)||this}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,o(e,i);var u=r.prototype;return u.onReady=function(){this.classRow=".multi-add__row",this.classResultMessage=".multi-add__result",this.classAddButton=".multi-add__add-button",this.classRemoveButton=".multi-add__remove-button",this.classNameRowError="multi-add__row--error",this.$form=a(".multi-add"),this.$file=a(".csv-file"),this.snippet=a(this.classRow)[0].outerHTML,this.lines=1,this.searchTerms=[],this.resetState(),this.bindEvents()},u.resetState=function(){this.items=[],this.errors=[],this.currentLoop=0},u.handleErrors=function(){var t=this,e=this.context.skuError;a(this.errors).each((function(i,r){r.addClass(t.classNameRowError),r.children(t.classResultMessage).text(e)}))},u.handleAjax=function(){var t=this;this.currentLoop<this.items.length&&n.ZP.api.getPage(this.items[this.currentLoop].url,{template:"f/b2b/quick-add-response"},(function(e,i){var r=i.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").trim();if(e)throw new Error(e);r.length?(t.items[t.currentLoop].target.children(t.classResultMessage).text(r),a(t.items[t.currentLoop].target).addClass("multi-add__row--advisory")):(t.items[t.currentLoop].target.children(t.classResultMessage).text(a(".multi-add__submit-button").data("message")),a(t.items[t.currentLoop].target).attr("data-status","success").addClass("multi-add__row--success")),t.currentLoop++,t.handleErrors(),t.handleAjax()})),this.currentLoop===this.items.length&&(this.fetchCounter(),a(".multi_add__cart-button").css("display","inline-block"))},u.fetchCounter=function(){n.ZP.api.cart.getContent({template:"f/cart/item-count"},(function(t,e){e>0&&a("body").trigger("cart-quantity-update",e)}))},u.handleButtonDisplay=function(){var t=this.$form.children(this.classRow),e=t.find(this.classRemoveButton),i=t.find(this.classAddButton),r=a(t[this.lines-1]).find(this.classAddButton);this.lines>1?(e.removeClass("multi-add__remove-button--last").removeAttr("disabled"),i.removeClass("multi-add__add-button--disabled").removeAttr("disabled","disabled"),i.not(r).addClass("multi-add__add-button--disabled").attr("disabled","disabled")):(e.addClass("multi-add__remove-button--last").attr("disabled","disabled"),i.removeClass("multi-add__add-button--disabled").removeAttr("disabled"))},u.handleAddLine=function(t,e){var i=a(this.snippet).clone();t&&e&&(a(i[0].children[0]).val(t),a(i[0].children[1]).val(e)),a(".multi-add__submit-button").before(i),this.lines++,this.handleButtonDisplay()},u.handleRemoveLine=function(t){t.is(":only-of-type")||(t.remove(),this.lines--,this.handleButtonDisplay())},u.handleItemSelect=function(t,e){var i=t?a(t.target):e,r=i.parents(".multi-add__row"),n=r.index()-1,s=a.trim(i.text());r.find("[data-multi-sku]")[0].value=s,this.searchTerms[n]=s},u.processForm=function(t,e){var i=this;t.preventDefault();var r=a(e).children(this.classRow),n=r.find(this.classResultMessage),s=this.context.addingToCart;this.resetState(),r.each((function(t,e){var r=a(e),n=r.find("[data-multi-sku]").val(),s=r.find("[data-multi-qty]").val();if(n&&s){var o="/cart.php?action=add&sku="+n+"&qty="+s;i.items.push({url:o,target:r})}else i.errors.push(r)})),n.text(s),this.handleAjax()},u.parseCSV=function(t,e){a(".alertBox-message span").text(""),a(".alertBox").hide();var i,r,n=t.target.files[0],o=this.context.csvMissingSkuHeader,u=this.context.csvMissingQtyHeader;(0,s.parse)(n,{preview:1,complete:function(t){-1===t.data[0].indexOf("sku")&&(i=!0),-1===t.data[0].indexOf("qty")&&(r=!0),r||i?(i&&a(".alertBox-message span").append(o),r&&a(".alertBox-message span").append(u),a(".alertBox").show()):(0,s.parse)(n,{header:!0,dynamicTyping:!1,skipEmptyLines:!0,step:function(t){var i=t.data[0].sku,r=t.data[0].qty;e.handleAddLine(i,r)}})}})},u.bindEvents=function(){var t=this;this.$form.on("click",this.classAddButton,(function(){t.handleAddLine()})),this.$form.on("click",this.classRemoveButton,(function(e){t.handleRemoveLine(a(e.target).parent())})),this.$form.on("change","[data-multi-sku]",(function(e){var i=a(e.target);i.val()&&(i.siblings(t.classResultMessage).text(""),i.parent().removeClass(t.classNameRowError))})),this.$form.on("submit",(function(e){t.processForm(e,t.$form[0])})),this.$file.on("change",(function(e){t.parseCSV(e,t)}))},r}(r.Z)},7460:function(t,e){var i,r;Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),i=function(){"use strict";var t,e,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{},r=!i.document&&!!i.postMessage,n=r&&/(\?|&)papaworker(=|&|$)/.test(i.location.search),s=!1,a={},o=0,u={parse:function(e,r){var n=(r=r||{}).dynamicTyping||!1;if(C(n)&&(r.dynamicTypingFunction=n,n={}),r.dynamicTyping=n,r.transform=!!C(r.transform)&&r.transform,r.worker&&u.WORKERS_SUPPORTED){var h=function(){if(!u.WORKERS_SUPPORTED)return!1;if(!s&&null===u.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=u.SCRIPT_PATH||t;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var r=new i.Worker(e);return r.onmessage=v,r.id=o++,a[r.id]=r}();return h.userStep=r.step,h.userChunk=r.chunk,h.userComplete=r.complete,h.userError=r.error,r.step=C(r.step),r.chunk=C(r.chunk),r.complete=C(r.complete),r.error=C(r.error),delete r.worker,void h.postMessage({input:e,config:r,workerId:h.id})}var d=null;return u.NODE_STREAM_INPUT,"string"==typeof e?d=r.download?new l(r):new f(r):!0===e.readable&&C(e.read)&&C(e.on)?d=new p(r):(i.File&&e instanceof File||e instanceof Object)&&(d=new c(r)),d.stream(e)},unparse:function(t,e){var i=!1,r=!0,n=",",s="\r\n",a='"',o=!1;"object"==typeof e&&("string"!=typeof e.delimiter||u.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(n=e.delimiter),("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(o=e.skipEmptyLines),"string"==typeof e.newline&&(s=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(r=e.header));var h=new RegExp(_(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return l(null,t,o);if("object"==typeof t[0])return l(d(t[0]),t,o)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:d(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),l(t.fields||[],t.data||[],o);throw"exception: Unable to serialize unrecognized input";function d(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function l(t,e,i){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,u=!Array.isArray(e[0]);if(o&&r){for(var h=0;h<t.length;h++)0<h&&(a+=n),a+=c(t[h],h);0<e.length&&(a+=s)}for(var d=0;d<e.length;d++){var l=o?t.length:e[d].length,f=!1,p=o?0===Object.keys(e[d]).length:0===e[d].length;if(i&&!o&&(f="greedy"===i?""===e[d].join("").trim():1===e[d].length&&0===e[d][0].length),"greedy"===i&&o){for(var m=[],_=0;_<l;_++){var g=u?t[_]:_;m.push(e[d][g])}f=""===m.join("").trim()}if(!f){for(var v=0;v<l;v++){0<v&&!p&&(a+=n);var y=o&&u?t[v]:v;a+=c(e[d][y],v)}d<e.length-1&&(!i||0<l&&!p)&&(a+=s)}}return a}function c(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);t=t.toString().replace(h,a+a);var r="boolean"==typeof i&&i||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(t,u.BAD_DELIMITERS)||-1<t.indexOf(n)||" "===t.charAt(0)||" "===t.charAt(t.length-1);return r?a+t+a:t}}};if(u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\ufeff",u.BAD_DELIMITERS=["\r","\n",'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!r&&!!i.Worker,u.SCRIPT_PATH=null,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=g,u.ParserHandle=m,u.NetworkStreamer=l,u.FileStreamer=c,u.StringStreamer=f,u.ReadableStreamStreamer=p,i.jQuery){var h=i.jQuery;h.fn.parse=function(t){var e=t.config||{},r=[];return this.each((function(t){if("INPUT"!==h(this).prop("tagName").toUpperCase()||"file"!==h(this).attr("type").toLowerCase()||!i.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)r.push({file:this.files[n],inputElem:this,instanceConfig:h.extend({},e)})})),n(),this;function n(){if(0!==r.length){var e,i,n,a=r[0];if(C(t.before)){var o=t.before(a.file,a.inputElem);if("object"==typeof o){if("abort"===o.action)return"AbortError",e=a.file,i=a.inputElem,n=o.reason,void(C(t.error)&&t.error({name:"AbortError"},e,i,n));if("skip"===o.action)return void s();"object"==typeof o.config&&(a.instanceConfig=h.extend(a.instanceConfig,o.config))}else if("skip"===o)return void s()}var d=a.instanceConfig.complete;a.instanceConfig.complete=function(t){C(d)&&d(t,a.file,a.inputElem),s()},u.parse(a.file,a.instanceConfig)}else C(t.complete)&&t.complete()}function s(){r.splice(0,1),n()}}}function d(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new m(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&C(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1;var s=this._partialLine+t;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=a.meta.cursor;this._finished||(this._partialLine=s.substring(o-this._baseIndex),this._baseIndex=o),a&&a.data&&(this._rowCount+=a.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)i.postMessage({results:a,workerId:u.WORKER_ID,finished:h});else if(C(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return;a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!h||!C(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||a&&a.meta.paused||this._nextChunk(),a}},this._sendError=function(t){C(this._config.error)?this._config.error(t):n&&this._config.error&&i.postMessage({workerId:u.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=u.RemoteChunkSize),d.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open("GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+n),e.setRequestHeader("If-None-Match","webkit-no-cache")}try{e.send()}catch(t){this._chunkError(t.message)}r&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function c(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=u.LocalChunkSize),d.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,n)}var s=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;d.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,i=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(i)}}}function p(t){d.call(this,t=t||{});var e=[],i=!0,r=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(t){var e,i,r,n=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,s=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,a=this,o=0,h=0,d=!1,l=!1,c=[],f={data:[],errors:[],meta:{}};if(C(t.step)){var p=t.step;t.step=function(e){if(f=e,y())v();else{if(v(),0===f.data.length)return;o+=e.data.length,t.preview&&o>t.preview?i.abort():p(f,a)}}}function m(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function v(){if(f&&r&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<f.data.length;e++)m(f.data[e])&&f.data.splice(e--,1);return y()&&function(){if(f){for(var e=0;y()&&e<f.data.length;e++)for(var i=0;i<f.data[e].length;i++){var r=f.data[e][i];t.trimHeaders&&(r=r.trim()),c.push(r)}f.data.splice(0,1)}}(),function(){if(!f||!t.header&&!t.dynamicTyping&&!t.transform)return f;for(var e=0;e<f.data.length;e++){var i,r=t.header?{}:[];for(i=0;i<f.data[e].length;i++){var n=i,s=f.data[e][i];t.header&&(n=i>=c.length?"__parsed_extra":c[i]),t.transform&&(s=t.transform(s,n)),s=k(n,s),"__parsed_extra"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s}f.data[e]=r,t.header&&(i>c.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+c.length+" fields but parsed "+i,h+e):i<c.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+c.length+" fields but parsed "+i,h+e))}return t.header&&f.meta&&(f.meta.fields=c),h+=f.data.length,f}()}function y(){return t.header&&0===c.length}function k(e,i){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(n.test(i)?parseFloat(i):s.test(i)?new Date(i):""===i?null:i):i;var r}function w(t,e,i,r){f.errors.push({type:t,code:e,message:i,row:r})}this.parse=function(n,s,a){var o=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var i=new RegExp(_(e)+"([^]*?)"+_(e),"gm"),r=(t=t.replace(i,"")).split("\r"),n=t.split("\n"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return"\n";for(var a=0,o=0;o<r.length;o++)"\n"===r[o][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(n,o)),r=!1,t.delimiter)C(t.delimiter)&&(t.delimiter=t.delimiter(n),f.meta.delimiter=t.delimiter);else{var h=function(e,i,r,n){for(var s,a,o,h=[",","\t","|",";",u.RECORD_SEP,u.UNIT_SEP],d=0;d<h.length;d++){var l=h[d],c=0,f=0,p=0;o=void 0;for(var _=new g({comments:n,delimiter:l,newline:i,preview:10}).parse(e),v=0;v<_.data.length;v++)if(r&&m(_.data[v]))p++;else{var y=_.data[v].length;f+=y,void 0!==o?1<y&&(c+=Math.abs(y-o),o=y):o=0}0<_.data.length&&(f/=_.data.length-p),(void 0===a||a<c)&&1.99<f&&(a=c,s=l)}return{successful:!!(t.delimiter=s),bestDelimiter:s}}(n,t.newline,t.skipEmptyLines,t.comments);h.successful?t.delimiter=h.bestDelimiter:(r=!0,t.delimiter=u.DefaultDelimiter),f.meta.delimiter=t.delimiter}var l=b(t);return t.preview&&t.header&&l.preview++,e=n,i=new g(l),f=i.parse(e,s,a),v(),d?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,i.abort(),e=e.substr(i.getCharIndex())},this.resume=function(){d=!1,a.streamer.parseChunk(e,!0)},this.aborted=function(){return l},this.abort=function(){l=!0,i.abort(),f.meta.aborted=!0,C(t.complete)&&t.complete(f),e=""}}function _(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,i=(t=t||{}).delimiter,r=t.newline,n=t.comments,s=t.step,a=t.preview,o=t.fastMode,h=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof i||-1<u.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw"Comment character same as delimiter";!0===n?n="#":("string"!=typeof n||-1<u.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var d=0,l=!1;this.parse=function(t,u,c){if("string"!=typeof t)throw"Input must be a string";var f=t.length,p=i.length,m=r.length,g=n.length,v=C(s),y=[],k=[],b=[],w=d=0;if(!t)return F();if(o||!1!==o&&-1===t.indexOf(e)){for(var R=t.split(r),E=0;E<R.length;E++){if(b=R[E],d+=b.length,E!==R.length-1)d+=r.length;else if(c)return F();if(!n||b.substr(0,g)!==n){if(v){if(y=[],L(b.split(i)),j(),l)return F()}else L(b.split(i));if(a&&a<=E)return y=y.slice(0,a),F(!0)}}return F()}for(var S,x=t.indexOf(i,d),O=t.indexOf(r,d),A=new RegExp(_(h)+_(e),"g");;)if(t[d]!==e)if(n&&0===b.length&&t.substr(d,g)===n){if(-1===O)return F();d=O+m,O=t.indexOf(r,d),x=t.indexOf(i,d)}else if(-1!==x&&(x<O||-1===O))b.push(t.substring(d,x)),d=x+p,x=t.indexOf(i,d);else{if(-1===O)break;if(b.push(t.substring(d,O)),P(O+m),v&&(j(),l))return F();if(a&&y.length>=a)return F(!0)}else for(S=d,d++;;){if(-1===(S=t.indexOf(e,S+1)))return c||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:d}),M();if(S===f-1)return M(t.substring(d,S).replace(A,e));if(e!==h||t[S+1]!==h){if(e===h||0===S||t[S-1]!==h){var T=D(-1===O?x:Math.min(x,O));if(t[S+1+T]===i){b.push(t.substring(d,S).replace(A,e)),d=S+1+T+p,x=t.indexOf(i,d),O=t.indexOf(r,d);break}var I=D(O);if(t.substr(S+1+I,m)===r){if(b.push(t.substring(d,S).replace(A,e)),P(S+1+I+m),x=t.indexOf(i,d),v&&(j(),l))return F();if(a&&y.length>=a)return F(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:d}),S++}}else S++}return M();function L(t){y.push(t),w=d}function D(e){var i=0;if(-1!==e){var r=t.substring(S+1,e);r&&""===r.trim()&&(i=r.length)}return i}function M(e){return c||(void 0===e&&(e=t.substr(d)),b.push(e),d=f,L(b),v&&j()),F()}function P(e){d=e,L(b),b=[],O=t.indexOf(r,d)}function F(t){return{data:y,errors:k,meta:{delimiter:i,linebreak:r,aborted:l,truncated:!!t,cursor:w+(u||0)}}}function j(){s(F()),y=[],k=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return d}}function v(t){var e=t.data,i=a[e.workerId],r=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var n={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(C(i.userStep)){for(var s=0;s<e.results.data.length&&(i.userStep({data:[e.results.data[s]],errors:e.results.errors,meta:e.results.meta},n),!r);s++);delete e.results}else C(i.userChunk)&&(i.userChunk(e.results,n,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var i=a[t];C(i.userComplete)&&i.userComplete(e),i.terminate(),delete a[t]}function k(){throw"Not implemented."}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=b(t[i]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function C(t){return"function"==typeof t}return n?i.onmessage=function(t){var e=t.data;if(void 0===u.WORKER_ID&&e&&(u.WORKER_ID=e.workerId),"string"==typeof e.input)i.postMessage({workerId:u.WORKER_ID,results:u.parse(e.input,e.config),finished:!0});else if(i.File&&e.input instanceof File||e.input instanceof Object){var r=u.parse(e.input,e.config);r&&i.postMessage({workerId:u.WORKER_ID,results:r,finished:!0})}}:u.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",(function(){s=!0}),!0):s=!0),(l.prototype=Object.create(d.prototype)).constructor=l,(c.prototype=Object.create(d.prototype)).constructor=c,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,u},void 0===(r=i.apply(e,[]))||(t.exports=r)}}]);
//# sourceMappingURL=theme-bundle.chunk.478.js.map
